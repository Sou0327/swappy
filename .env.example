# Phase 1-2: Multi-Chain Deposit Detection Environment Variables
# Never commit real secrets. These are placeholders.

# =================================
# Supabase Configuration (Required)
# =================================
# Note: project_id is set via `supabase link --project-ref <id>`, not needed here
VITE_SUPABASE_PUBLISHABLE_KEY="YOUR_SUPABASE_ANON_KEY"
VITE_SUPABASE_URL="https://YOUR_PROJECT.supabase.co"

# =================================
# EVM Chain Configuration (Ethereum-based)
# =================================
# Set either provider (one is sufficient)
VITE_ALCHEMY_API_KEY="YOUR_ALCHEMY_API_KEY"
VITE_INFURA_PROJECT_ID="YOUR_INFURA_PROJECT_ID"

# Network Configuration
VITE_ETHEREUM_NETWORK="sepolia"   # e.g., sepolia, mainnet

# ETH Configuration
VITE_DEPOSIT_MIN_CONFIRMATIONS_ETH=12
VITE_DEPOSIT_ENABLED_ETH=true
VITE_MIN_DEPOSIT_ETH=0.01          # Recommended minimum: 0.01-0.05 ETH

# USDT (ERC-20) Configuration
VITE_DEPOSIT_MIN_CONFIRMATIONS_USDT=12
VITE_DEPOSIT_ENABLED_USDT=true
VITE_MIN_DEPOSIT_USDT=1.0

# ERC-20 Token Contract Addresses
VITE_USDT_CONTRACT_ADDRESS_MAINNET="0xdac17f958d2ee523a2206206994597c13d831ec7"
VITE_USDT_CONTRACT_ADDRESS_SEPOLIA="0x..."

# =================================
# BTC Chain Configuration
# =================================
# BTC API Provider Configuration (BlockCypher, Blockstream, etc.)
VITE_BTC_API_PROVIDER="blockstream"  # blockstream | blockcypher
VITE_BLOCKCYPHER_API_TOKEN="YOUR_BLOCKCYPHER_TOKEN"

# BTC Configuration
VITE_DEPOSIT_MIN_CONFIRMATIONS_BTC=3
VITE_DEPOSIT_ENABLED_BTC=false
VITE_MIN_DEPOSIT_BTC=0.0001         # Recommended minimum: 0.0001-0.001 BTC

# BTC Network
VITE_BTC_NETWORK="testnet"          # mainnet | testnet

# =================================
# XRP Chain Configuration
# =================================
# XRP API Configuration
VITE_XRP_API_PROVIDER="xrpl"       # xrpl | ripple
VITE_XRP_SERVER_URL="wss://s.altnet.rippletest.net:51233"  # testnet

# XRP Configuration
VITE_DEPOSIT_MIN_CONFIRMATIONS_XRP=1
VITE_DEPOSIT_ENABLED_XRP=false
VITE_MIN_DEPOSIT_XRP=20.0           # Recommended minimum: 20-50 XRP

# XRP Fixed Address (Destination Tag Method)
# ‚ö†Ô∏è XRP addresses are managed in database (xrp_fixed_addresses table)
# Execute the following INSERT in Supabase SQL Editor:
# INSERT INTO xrp_fixed_addresses (network, address) VALUES
# ('mainnet', 'rYourMainnetAddress'),
# ('testnet', 'rYourTestnetAddress')
# ON CONFLICT (network, address) DO NOTHING;

# =================================
# TRON Chain Configuration
# =================================
# TRON API Configuration
VITE_TRON_API_PROVIDER="trongrid"   # trongrid | tronweb
VITE_TRONGRID_API_KEY="YOUR_TRONGRID_API_KEY"

# TRON Configuration
VITE_DEPOSIT_MIN_CONFIRMATIONS_TRON=19
VITE_DEPOSIT_ENABLED_TRON=false
VITE_MIN_DEPOSIT_TRX=10.0           # Recommended minimum: 10-100 TRX

# USDT (TRC-20) Configuration
VITE_DEPOSIT_ENABLED_USDT_TRC=false
VITE_MIN_DEPOSIT_USDT_TRC=1.0

# TRC-20 Token Contract Address
VITE_USDT_TRC20_CONTRACT_ADDRESS="TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t"

# =================================
# ADA (Cardano) Chain Configuration
# =================================
# Cardano API Configuration
VITE_ADA_API_PROVIDER="blockfrost"  # blockfrost | cardano-graphql
VITE_BLOCKFROST_PROJECT_ID="YOUR_BLOCKFROST_PROJECT_ID"

# ADA Configuration
VITE_DEPOSIT_MIN_CONFIRMATIONS_ADA=15
VITE_DEPOSIT_ENABLED_ADA=false
VITE_MIN_DEPOSIT_ADA=1.0            # Recommended minimum: 1-10 ADA

# ADA Network
VITE_ADA_NETWORK="testnet"          # mainnet | testnet

# =================================
# Branding Configuration (White-label Support)
# =================================
# Platform name and description (used in UI and emails)
VITE_APP_NAME="Your Platform Name"
VITE_APP_TAGLINE="Your platform description here"
VITE_APP_DOMAIN="yourdomain.com"
VITE_APP_TWITTER="your_twitter"

# =================================
# Feature Configuration
# =================================
# KYC Optional Flag (UI/route control)
VITE_FEATURE_KYC_OPTIONAL=true

# Service Restriction Mode (for system maintenance or emergencies)
# Values: none (no restrictions) | partial (partial restrictions)
# Default: unset or none
# Restrictions when partial:
#   - New user registration stopped
#   - KYC (identity verification) applications stopped
#   - New deposits stopped
#   - Admin dashboard access restricted
# Impact on existing users:
#   - Login functionality: No restrictions
#   - Withdrawal functionality: No restrictions
#   - Trading with existing assets: No restrictions
# Note: Prioritizes protection of existing users' assets, critical features always maintained
VITE_SERVICE_RESTRICTION_MODE="none"

# Single Market Mode (optional)
VITE_SINGLE_MARKET_ID=""

# Security Configuration
VITE_FEATURE_2FA_ENABLED=false
VITE_SESSION_TIMEOUT_MINUTES=60

# =================================
# Development & Operations Configuration
# =================================
# Wallet Encryption Key (must be changed for production)
# ‚ö†Ô∏è CRITICAL: Wallet encryption key - must set strong key via environment variable in production
WALLET_ENCRYPTION_KEY=""

# Log Level
VITE_LOG_LEVEL="info"              # debug | info | warn | error

# Emergency Stop Feature (stops all deposit acceptance)
VITE_EMERGENCY_STOP_DEPOSITS=false

# =================================
# External Services Configuration (Optional)
# =================================
# Price Data API (CoinGecko, etc.)
VITE_PRICE_API_PROVIDER="coingecko"
VITE_COINGECKO_API_KEY="YOUR_COINGECKO_API_KEY"

# Notification Configuration
VITE_NOTIFICATION_ENABLED=false
VITE_WEBHOOK_URL="YOUR_WEBHOOK_URL"

# =================================
# Tatum Subscription Management CLI Configuration
# =================================
# Tatum API Configuration (CLI only)
TATUM_API_KEY="YOUR_TATUM_API_KEY"
TATUM_WEBHOOK_URL="YOUR_SUPABASE_FUNCTION_URL/tatum-webhook"

# Supabase CLI Configuration (server-side)
SUPABASE_URL="https://YOUR_PROJECT.supabase.co"
SUPABASE_SERVICE_ROLE_KEY="YOUR_SERVICE_ROLE_KEY"

# =================================
# New Edge Function Configuration (Phase 0 Implementation)
# =================================
# tatum-subscription-ensure Function (auto-create subscription on address generation)
# TATUM_SUBSCRIPTION_ENSURE_TIMEOUT=60000       # Timeout (milliseconds)
# TATUM_SUBSCRIPTION_ENSURE_RETRY_COUNT=3        # Retry count

# tatum-admin-status Function (admin dashboard data retrieval)
# TATUM_ADMIN_STATUS_CACHE_TTL=300               # Cache TTL (seconds)
# TATUM_ADMIN_STATUS_MAX_ERRORS=50               # Maximum errors to retrieve

# CLI Runtime Configuration (Node.js/tsx execution within Edge Functions)
# TSX_PATH="/usr/local/bin/tsx"                  # tsx execution path (customizable)
# NODE_PATH="/usr/local/bin/node"                # Node.js execution path (customizable)
# PROJECT_ROOT="/opt/functions"                  # Project root path (within Supabase)

# =================================
# Webhook Signature Verification Configuration
# =================================
# Webhook HMAC Signature Verification (security required)
TATUM_WEBHOOK_HMAC_SECRET="YOUR_WEBHOOK_HMAC_SECRET_KEY"
TATUM_WEBHOOK_SIGNATURE_ALGORITHM="sha512"

# Webhook Error Handling Configuration
TATUM_WEBHOOK_RETRY_ATTEMPTS=3
TATUM_WEBHOOK_TIMEOUT_SECONDS=30
TATUM_WEBHOOK_DEAD_LETTER_QUEUE_ENABLED=true

# =================================
# Development & Test Environment Configuration
# =================================
# Environment Identification
NODE_ENV="development"                    # development | staging | production
VITE_APP_ENV="development"

# Local Development Configuration
VITE_DEBUG_MODE=true
VITE_MOCK_WEBHOOKS=false                 # Testing: Mock webhooks
VITE_SKIP_SIGNATURE_VERIFICATION=false   # ‚ö†Ô∏è Only set to true during development

# Test Configuration
VITE_ENABLE_TEST_ENDPOINTS=true          # Enable test API endpoints
VITE_TEST_WEBHOOK_URL="http://localhost:54321/functions/v1/tatum-webhook"

# Debug & Monitoring Configuration
VITE_ENABLE_PERFORMANCE_MONITORING=false
VITE_VERBOSE_LOGGING=false               # Verbose logging output (development only)
VITE_LOG_WEBHOOK_PAYLOADS=false          # ‚ö†Ô∏è Webhook payload logging (development only)

# =================================
# Security Configuration (Production)
# =================================
# CORS Configuration (for frontend)
VITE_ALLOWED_ORIGINS="http://localhost:3000,http://localhost:5173"

# Edge Functions CORS Configuration (required for production)
# ‚ö†Ô∏è .env.example alone won't apply to Edge Functions
# Production: supabase secrets set ALLOWED_ORIGINS="..."
# Local: supabase functions serve --env-file .env.local
ALLOWED_ORIGINS="https://yourdomain.com,https://www.yourdomain.com"

# API Rate Limiting
VITE_API_RATE_LIMIT_ENABLED=true
VITE_API_RATE_LIMIT_REQUESTS_PER_MINUTE=100

# SSL/TLS Configuration (Production)
VITE_FORCE_HTTPS=false                   # Set to true in production
VITE_SSL_CERTIFICATE_PATH=""
VITE_SSL_PRIVATE_KEY_PATH=""

# =================================
# Monitoring & Alerting Configuration
# =================================
# Error Monitoring
VITE_ERROR_REPORTING_ENABLED=false
VITE_SENTRY_DSN=""

# Alert Configuration
VITE_ALERT_WEBHOOK_ERRORS_THRESHOLD=5    # Alert on consecutive error count
VITE_ALERT_EMAIL=""
VITE_ALERT_SLACK_WEBHOOK=""

# Health Check Configuration
VITE_HEALTH_CHECK_INTERVAL_MINUTES=5
VITE_HEALTH_CHECK_ENABLED=true

# =================================
# Test & Verification Configuration (Phase 0 Addition)
# =================================
# Address Generation and Subscription Integration Testing
VITE_TEST_ADDRESS_GENERATION=true            # Enable address generation testing
VITE_TEST_SUBSCRIPTION_INTEGRATION=true      # Enable subscription integration testing

# Admin Dashboard Feature Testing
VITE_TEST_ADMIN_DASHBOARD=true               # Enable admin dashboard testing
VITE_TEST_WEBHOOK_ERROR_TRACKING=true        # Enable webhook error tracking testing

# CLI Feature Testing
TATUM_CLI_TEST_MODE=false                    # CLI test mode (false in production)
TATUM_CLI_DRY_RUN=false                      # Dry run mode (no actual operations)

ETHEREUM_RPC_URL=https://eth-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY
ETHEREUM_SEPOLIA_RPC_URL=https://eth-sepolia.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY

# Showcase Mode (Demo Mode)
# true: Always in showcase mode (registration/login hidden, trading disabled)
# false or unset: Normal mode (all features enabled)
VITE_DEMO_MODE=false


# =================================
# Testing Procedure Guide
# =================================
#
# üìã Phase 0 Feature Testing Procedure:
#
# 1. Environment Setup
#    cp .env.example .env.local
#    # Set required values: TATUM_API_KEY, SUPABASE_*, TATUM_WEBHOOK_HMAC_SECRET
#
# 2. Address Generation & Subscription Integration Test
#    npm run dev
#    # Access deposit page in browser ‚Üí Generate address ‚Üí Check subscription creation in console
#
# 3. Admin Dashboard Test
#    # Login with admin account ‚Üí /admin/wallet ‚Üí Click "Refresh" to check subscription status
#
# 4. CLI Feature Test
#    npm run tatum:status    # Check subscription status
#    npm run tatum:list      # Display list
#    # Test ensure command with test address:
#    npx tsx scripts/tatum-subscription-manager.ts ensure 0x1234...abcd evm ethereum ETH
#
# 5. Webhook HMAC Signature Test (see detailed procedure in README)
#    node scripts/generate-hmac.js
#    # Test webhook submission with generated curl command
#
# 6. Edge Function Test
#    # Start Supabase CLI: npx supabase functions serve --env-file .env.local
#    # tatum-subscription-ensure: Auto-called on address generation
#    # tatum-admin-status: Called via admin dashboard "Refresh" button
#
# ‚ö†Ô∏è Security Notes:
# - TATUM_WEBHOOK_HMAC_SECRET must be set to a strong random value in production
# - SUPABASE_SERVICE_ROLE_KEY is sensitive, store in .env.local (never commit to GitHub)
# - In production, VITE_SKIP_SIGNATURE_VERIFICATION=false must be set (required)
#
# üîó Related Documentation:
# - README.md: Basic setup procedure
# - scripts/generate-hmac.js: HMAC signature test detailed procedure
# - supabase/functions/*/index.ts: Edge Function specifications
# - scripts/tatum-subscription-manager.ts: CLI usage
